services:
  xtts-service:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: xtts-service
    environment:
      - XTTS_CONFIG_FILE=/app/config.yaml
    network_mode: host
    volumes:
      # Mount real configuration file 
      - /abs/path/to/config.yaml:/app/config.yaml:ro
      # Mount a writable directory for streaming metrics logging.
      - /abs/path/to/logs/directory:/app/logs
      # Mount your XTTS checkpoint and reference audio inside the container, e.g.:
      - /abs/path/to/xtts-checkpoint:/app/model:ro
      - /abs/path/to/reference.wav:/app/reference.wav:ro
      # Optional: mount a directory with multiple reference voices (.mp3) when voices_dir is configured.
      - /abs/path/to/voices:/app/voices:ro
    restart: unless-stopped
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: all
              capabilities: [gpu]

